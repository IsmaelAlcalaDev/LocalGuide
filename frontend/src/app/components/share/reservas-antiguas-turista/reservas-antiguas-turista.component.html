<div class="container my-5 pb-5">
  <h2 class="fs-2 mt-5 py-3 text-center" style="font-family: 'Bebas Neue', sans-serif;">Historial de viajes</h2>
    <div class="row row-cols-1 row-cols-md-2 row-cols-lg-3 g-3">
      <ng-container *ngFor="let reserva of reservasActivas | paginate: { itemsPerPage: pageSize, currentPage: currentPage, id: 'paginacionReservas' }">
        <div class="col">
          <div class="card rounded-4">
            <div class="card-img-container">
              <img [src]="reserva.guia.ciudadFoto" class="card-img-top img-fluid rounded" alt="Foto de la ciudad del guía">
            </div>
            <div class="card-body mx-3">
              <h4 class="card-title fw-bold mb-3">{{ reserva.guia.nombre }} fue tu guía en <br> <span>{{ reserva.guia.ciudad }}, {{ reserva.guia.pais }}</span> </h4>
              <p class="card-text mb-2"><i class="far fa-calendar-alt"></i> Fecha de inicio: {{ reserva.fechaInicio }}</p>
              <p class="card-text mb-2"><i class="far fa-calendar-alt"></i> Fecha de fin: {{ reserva.fechaFin }}</p>
              <p class="card-text mb-2"><i class="far fa-clock"></i> {{ reserva.horas }} horas de tour</p>
              
              <!-- Condición para mostrar estrellas de calificación o enlace para dejar reseña -->
              <ng-container *ngIf="reserva.rating !== null; else leaveReview">
                <div class="star-rating mb-3">
                  <ng-container *ngFor="let star of [1, 2, 3, 4, 5]">
                    <i class="fa" [ngClass]="{
                      'fa-star': reserva.rating >= star,
                      'fa-star-half-alt': reserva.rating + 0.5 >= star && reserva.rating < star,
                      'fa-star-o': reserva.rating < star
                    }"></i>
                  </ng-container>
                </div>
              </ng-container>
              <ng-template #leaveReview>
                <a class="mb-3" href="#">Dejar reseña</a>
              </ng-template>
  
              <p class="card-text mb-3 precio"> {{ reserva.precio }} €</p>
            </div>
          </div>
        </div>
      </ng-container>
    </div>
    <div class="d-flex justify-content-center mt-5">
      <pagination-controls (pageChange)="pageChanged($event)" id="paginacionReservas" previousLabel="Anterior" nextLabel="Siguiente"></pagination-controls>
    </div>
  </div>
  